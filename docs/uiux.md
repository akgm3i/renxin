# UI/UX仕様詳細
## 1. はじめに
本ドキュメントは「ダーツ練習支援アプリケーション仕様書」を補完し、ユーザーインターフェース（UI）とユーザー体験（UX）に関する詳細な仕様を定義するものである。

## 2. 画面遷移フロー
ユーザーの主要な操作の流れを以下に示す。

[アプリケーション起動]

初回起動時: プレイヤー情報が存在しないため、[新規プレイヤー登録画面] へ遷移する。

2回目以降: 前回終了時のプレイヤーが選択された状態で [ホーム画面] が表示される。

[ホーム画面（メインメニュー）]

選択中のプレイヤー名とレーティングが表示される。

-> 「01 GAME」または「CRICKET」ボタンを押すと、それぞれの [ゲーム画面] へ。

-> 「成績を見る」ボタンを押すと [統計データ画面] へ。

-> 「プレイヤー管理」ボタンを押すと [プレイヤー管理画面] へ。

[プレイヤー管理画面]

登録済みのプレイヤー一覧が表示される。

-> 一覧からプレイヤーを選択すると、そのプレイヤーが選択された状態で [ホーム画面] へ戻る。

-> 「新規プレイヤー登録」ボタンを押すと [新規プレイヤー登録画面] へ。

[ゲーム画面]

ダーツボードUIで着弾点を3回入力する。

-> 3投後、自動的に [ラウンド終了・動画再生画面] へ遷移。

-> ゲームが終了条件を満たすと、自動的に [ゲーム結果画面] へ遷移。

[ラウンド終了・動画再生画面]

直前の投擲動画（姿勢・ボード）が再生される。

-> 「次のラウンドへ」ボタンを押すと [ゲーム画面] へ戻る。

-> 「ゲームを中断する」ボタンを押すと [ホーム画面] へ戻る（確認ダイアログ表示）。

## 3. 主要画面ワイヤーフレーム（テキストベース）
各画面に配置する主要なUI要素を定義する。

### 3.1. ホーム画面

画面構成:
- 上部: ヘッダーエリア (画面高さの約10%)
- 中央: メインコンテンツエリア (画面高さの約70%)
- 下部: フッターエリア (画面高さの約20% - 必要に応じて)

ヘッダー:
- 左寄せ: 現在選択中のプレイヤー名 (大文字、太字)
- 中央: 現在の総合レーティング (大きめのフォントサイズ)
- 右寄せ: [アイコンボタン] 設定（カメラ設定など）

メインコンテンツ（画面中央に集約）:
- 縦方向に中央揃えで配置
- 各ボタンは十分なタッチターゲットサイズを確保し、横幅は画面の約80%程度、高さは均等に配分する。
- [ボタン] 01 GAME
- [ボタン] CRICKET
- [ボタン] 成績を見る
- [ボタン] プレイヤー管理

### 3.2. ゲーム画面

画面構成:
- 上部: ヘッダーエリア (画面高さの約5%)
- 中央上部: スコア表示エリア (画面高さの約15%)
- 中央: メインコンテンツエリア (画面高さの約60%)
- 下部: 操作エリア (画面高さの約20%)

ヘッダー:
- 左寄せ: ゲーム種別（例: 501）
- 中央: 現在のラウンド数（例: Round 5/15）
- 右寄せ: プレイヤー名

スコア表示エリア（画面上部）:
- 現在の持ち点／マーク状況 (大きく表示)
- 直前の3投のスコア (小さめに表示)

メインコンテンツ（画面中央）:
- 画面中央にダーツボードUIを配置。画面幅いっぱいに広がるように配置し、タッチ操作領域を最大化する。

操作エリア（画面下部）:
- 横並びでボタンを配置し、十分なタッチターゲットサイズを確保する。
- [ボタン] 一投戻す（UNDO）
- [ボタン] ラウンド終了（3投前でも手動で終了させる場合）

### 3.3. ラウンド終了・動画再生画面

画面構成:
- 上部: ヘッダーエリア (画面高さの約5%)
- 中央: メインコンテンツエリア (画面高さの約70%)
- 下部: 操作エリア (画面高さの約25%)

ヘッダー:
- 中央: タイトル「プレイバック」

メインコンテンツ（画面分割）:
- 画面を左右に均等に分割し、左側に姿勢カメラの動画プレイヤー、右側にボードカメラの動画プレイヤーを配置する。
- 各動画プレイヤーの下に、それぞれに対応するコントロールパネルを配置する。

コントロールパネル（動画プレイヤー下）:
- [再生/一時停止ボタン]
- [スロー再生ボタン (0.5x)]
- 再生位置を示すシークバー (動画プレイヤーの幅いっぱいに配置)

画面下部:
- 中央に[ボタン] 次のラウンドへ を配置。
- 必要に応じて、[ボタン] ゲームを中断する などのオプションボタンを右下に配置。

### 3.4. プレイヤー管理画面

画面構成:
- 上部: ヘッダーエリア (画面高さの約10%)
- 中央: メインコンテンツエリア (画面高さの約80%)
- 下部: フッターエリア (画面高さの約10% - 必要に応じて)

ヘッダー:
- 左寄せ: [アイコンボタン] ホームに戻る
- 中央: タイトル「プレイヤー管理」

メインコンテンツ:
- 登録済みプレイヤーのリストを縦方向にスクロール可能に配置。各リスト項目は、名前と総合レーティングを横並びで表示する。
- リストの下部に[ボタン] 新規プレイヤー登録 を配置。

### 3.5. 統計データ画面

画面構成:
- 上部: ヘッダーエリア (画面高さの約10%)
- 中央: コンテンツエリア (画面高さの約90%)

ヘッダー:
- 左寄せ: [アイコンボタン] ホームに戻る
- 中央: タイトル「成績詳細」
- 右寄せ: 対象プレイヤー名

コンテンツエリア:
- 上部にタブナビゲーションを配置: [総合] [01 GAME] [CRICKET]
- タブの下に表示切替ボタンを横並びで配置: [ボタン] 当日 / [ボタン] 直近10ゲーム / [ボタン] 全期間
- その下にグラフ表示エリアを配置。レーティング、PPD/MPRの推移を示す折れ線グラフを表示する。グラフはインタラクティブで、期間のズームやデータポイントの表示が可能。
- グラフの下にゲーム履歴リストを配置。日付、ゲーム種別、スタッツ、結果を一覧で表示し、スクロール可能とする。

## 4. 操作フロー詳細
### 4.1. アプリケーション起動フロー
アプリケーションを起動する。

ローカルにプレイヤー情報が存在するか確認する。

存在しない場合 (初回起動): [新規プレイヤー登録画面] を表示する。

存在する場合: 前回終了時に選択されていたプレイヤー情報を読み込み、[ホーム画面] を表示する。

### 4.2. 入力ミス時の修正フロー
ユーザーがゲーム画面で着弾点を誤ってタッチする。

画面下部の「一投戻す（UNDO）」ボタンをタッチする。

直前の入力が取り消され、スコアも入力前の状態に戻る。入力回数が1回分戻る。

ユーザーは再度正しい着弾点を入力できる。

## 5. デザインシステムの検討

本アプリケーションでは、一貫性のあるUI/UXを提供し、開発効率を高めるために、簡易的なデザインシステムの導入を検討する。

- **共通コンポーネント**: ボタン、入力フィールド、ダイアログ、リストアイテムなど、頻繁に使用されるUI要素の標準的なスタイルと動作を定義する。
- **タイポグラフィ**: フォントファミリー、サイズ、ウェイト、行間など、テキスト表示に関するガイドラインを定義する。
- **カラーパレット**: ブランドカラー（`docs/about.md`参照）に基づき、プライマリ、セカンダリ、アクセント、背景、テキスト、エラー、成功などの色を定義し、使用ガイドラインを設ける。
- **スペーシング**: 要素間の余白やパディングに関するルールを定義し、統一感のあるレイアウトを実現する。

## 6. アクセシビリティガイドライン

全てのユーザーがアプリケーションを快適に利用できるよう、以下のアクセシビリティガイドラインを遵守する。

- **タッチターゲットサイズ**: ボタンやインタラクティブな要素は、指で操作しやすい十分なサイズ（推奨: 48x48dp以上）を確保する。
- **コントラスト比**: テキストと背景色のコントラスト比は、WCAG 2.1 AAレベル（通常テキスト4.5:1以上、大きなテキスト3:1以上）を満たすようにする。
- **色覚多様性への配慮**: 色のみに依存する情報伝達を避け、アイコン、テキスト、パターンなど、複数の視覚的手段を併用する。
- **キーボードナビゲーション**: タッチ操作だけでなく、キーボードによるナビゲーションも可能にする（将来的な機能拡張として）。
- **スクリーンリーダー対応**: 重要なUI要素には、スクリーンリーダーが適切に読み上げられるよう、意味のある代替テキストやARIA属性を提供する。
