# GEMINI
## 1. プロジェクト概要

このプロジェクトは、ドキュメント群 ( `docs/**` ) に基づいて定義されたダーツ練習支援アプリケーション「RENXIN」を開発するもの。

## 2. タスク管理と実装計画

- **実装計画**: `prompts/implementation_plan.md` に、開発の全体計画とタスクが定義されている。
- **タスク管理**: タスク管理は上記の実装計画ファイルに統合されている。Markdownのチェックボックス形式で進捗を管理しる。

## 3. 行動指針

1.  **仕様と計画の遵守**: すべての作業は `docs/**` に記載された仕様群と、それに基づく `prompts/implementation_plan.md` の計画とタスクに基づいて遂行すること。
2.  **進捗の反映**: タスクを完了した際には `prompts/implementation_plan.md` の対応するチェックボックスを更新し、進捗を記録すること。
3.  **自己完結**: この `AGENTS.md` と `prompts/implementation_plan.md` を参照することで、セッションが途切れた場合でも自律的に作業を再開できるようにすること。
4.  **再計画の考慮**: 作業を進めていく上で計画あるいはタスクの内容を更新したい場合はユーザーに確認を取ること。
5.  **記憶の継続**: 作業中に記憶しておくべきことが発生した場合、 `prompts/implementation_plan.md` に記録すること。仕様等の詳細化/変化が発生した場合は `docs` 以下の該当する文書を修正すること。
6.  **t_wada式TDDの実践**: 実装は t_wada, Kent Beckが推奨するTDDに従うこと。詳細は後述の「4. TDD実践ガイドライン」を参照すること。

---

## 4. TDD実践ガイドライン (Kent Beck & t_wada スタイル)

このガイドは、Kent Beckによって提唱され、和田卓人（t_wada）氏によって日本の開発現場に合わせて洗練されたTDDの実践的な要点をまとめたものです。

### 4.1. 基本原則

*   **テストファースト**: プロダクションコードを書く前に、必ず失敗するテストを先に書きます。
*   **動く、きれいなコード**: TDDは、常に動作し、かつクリーンなコードを維持しながら開発を進めるためのリズムです。
*   **TDDは開発手法**: テストを書くことが目的ではなく、テストを道標として高品質なソフトウェアを漸進的に構築するための開発手法です。

### 4.2. 実践サイクル: Red / Green / Refactor

このサイクルを、数分から数十分といった非常に短い時間で、何度も繰り返します。

*   **【RED】フェーズ: 失敗するテストを書く**
    1.  **タスクの選択**: 次に実装すべき小さな機能（ふるまい）を一つだけ選びます。
    2.  **テストの記述**: その機能が完成したと仮定したときに、成功するはずのテストコードを書きます。
    3.  **失敗の確認**: テストを実行し、**期待通りに失敗すること**を確認します。
        *   コンパイルエラーも「赤」と見なします。まずはコンパイルを通すための最小限の修正（空のクラスやメソッドの作成）を行います。
        *   テストが失敗する理由が、想定通りであることを確認します（例: `expected: 2, but got: 1`）。

*   **【GREEN】フェーズ: テストをパスさせる**
    1.  **最小限の実装**: 先ほど書いたテストをパスさせるためだけの、**最もシンプルで、たとえ「汚い」コードでもよい**のでプロダクションコードを書きます。
    2.  **パスの確認**: 再度テストを実行し、**全てのテストが成功すること**を確認します。
    3.  この段階では、コードの美しさや効率性よりも、まずテストをパスさせることを最優先します。

*   **【REFACTOR】フェーズ: コードをクリーンにする**
    1.  **設計の改善**: テストが通っているという安心感を元に、コードの設計を改善します。
        *   **重複の排除**: コード内やテストコードとの重複を取り除きます。
        *   **可読性の向上**: 変数名やメソッド名を分かりやすくします。複雑なロジックを小さなメソッドに分割します。
        *   **設計原則の適用**: SOLID原則などを意識し、より良い構造に修正します。
    2.  **継続的なテスト**: リファクタリングの前後で、**常にテストが成功し続けること**を確認します。少し修正してはテスト、を繰り返します。

### 4.3. 成功のための心構えとヒント (t_wada's Essence)

*   **ベイビー・ステップ**: 一つのテストは、一つの関心事に集中させます。サイクルを可能な限り小さく保つことで、リスクを減らし、集中力を維持します。
*   **テストリストから始める**: 実装を始める前に、これから作る機能の「ふるまい」を箇条書き（テストリスト）で書き出します。そのリストを一つずつ消化していく形で開発を進めます。
*   **テストしにくいなら、設計を疑う**: テストが書きにくいと感じたときは、プロダクションコードの設計に問題がある兆候です。テスト容易性の高い設計は、結果として疎結合で凝集度の高い、優れた設計につながります。
*   **リファクタリングをサボらない**: Greenの状態で満足してはいけません。TDDの恩恵（持続可能な開発ペース、変更容易性）は、リファクタリングによってもたらされます。「リファクタリングなくしてTDDあらず」です。
*   **自信を持って進む**: TDDによって作られたテストスイートは、未来の自分やチームメイトがコードを修正・拡張する際の「セーフティネット」となります。
